<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.great.dao.UserLoginDao">
	<select id="getUser" resultType="map">
		select
		userId, 
		uPhone,
		uPsw,
		salt,
		uRecommendCode,
		uRecommendAmount,
		uRegRecommendPeople,
		(select count(*) from TB_USER where uRecommendAmount = #{tel}) AS studentNum		
		from TB_USER 
		where
		uPhone = #{tel}
	</select>
	
	<insert id="addUser">
	insert into
	  TB_USER (uPhone,uPsw,registerTime,uRecommendCode,salt,uRegRecommendPeople)
	 values
	        (#{tel},#{psw},#{date},#{selfCode},#{salt},#{recommendPeople})
	</insert>

	<select id="getRecommendpeople" resultType="string">
		select uPhone from TB_USER where uRecommendCode = #{code}
	</select>
	
	
</mapper>